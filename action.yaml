name: "Moodle Plugin Version Generator"
author: "Gerardo Grinman <gerardo.grinman@aprende.com>"
description: "Increase the moodle plugin version"
inputs:
  path:
    description: "Path where the repository is located"
    required: false
    default: '.'
outputs:
  version:
    description: "A version.php file updated to the Pull-Request."
jobs:
  analyze:
    name: analyze plugin db/ directory
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v3

    - name: Verify Changed files
      uses: tj-actions/verify-changed-files@v12
      id: verify-changed-files
      with:
        files: |
            db

    - name: Run python when db directory changes
      if: contains(steps.verify-changed-files.outputs.changed_files, 'db')
      uses: docker
      image: 'Dockerfile' 

branding:
  icon: 'book'
  color: 'blue'
  steps:







jobs:
  analyze:
    name: Static Analysis with PHPStan
    runs-on: ubuntu-latest
    steps:
    - name: Checkout
      uses: actions/checkout@v1
    - name: Analysis
      uses: docker://phpstan/phpstan
      with:
        args: analyze --error-format=table <code path>
