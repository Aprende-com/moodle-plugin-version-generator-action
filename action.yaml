name: "Moodle Plugin Version Generator"
author: "Gerardo Grinman <gerardo.grinman@aprende.com>"
description: "Increase the moodle plugin version"
inputs:
  path:
    description: "Path where the repository is located"
    required: false
    default: '.'
outputs:
  version:
    description: "A version.php file updated to the Pull-Request."
runs:
  using: 'docker'
  image: 'Dockerfile'
branding:
  icon: 'book'
  color: 'blue'
  steps:

    - name: Verify Changed files
      uses: tj-actions/verify-changed-files@v12
      id: verify-changed-files
      with:
        files: |
            db
            db/*

    - name: Perform action when db directory changes
      if: contains(steps.verify-changed-files.outputs.changed_files, 'db')
      run: |
        echo "db/ directory has changed."
